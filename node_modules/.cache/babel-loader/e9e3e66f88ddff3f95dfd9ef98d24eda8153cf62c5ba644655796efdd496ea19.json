{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useRef, useState } from 'react';\nimport { useFetch as tsUseFetch, useLocalStorage } from 'usehooks-ts';\nimport { getHeaderOptions } from '../services';\nimport { useNavigate } from 'react-router-dom';\nconst useFetch = _ref => {\n  _s();\n  let {\n    method,\n    url\n  } = _ref;\n  const [loading, setLoading] = useState(false);\n  const [, setIsLogged] = useLocalStorage(process.env.REACT_APP_LOGGED_KEY, false);\n  const navigate = useNavigate();\n  const [fetchURL, setFetchURL] = useState(url);\n  const postBody = useRef(body);\n  const {\n    data,\n    error\n  } = tsUseFetch(fetchURL, {\n    method,\n    ...(postBody.current && {\n      body: JSON.stringify(postBody.current)\n    }),\n    ...getHeaderOptions(),\n    ...options\n  });\n  const doFetch = _ref2 => {\n    let {\n      url,\n      body\n    } = _ref2;\n    if (body) {\n      postBody.current = body;\n    }\n    setFetchURL(url);\n  };\n  useEffect(() => {\n    if (error) {\n      if (error.message === 'Unauthorized') {\n        setIsLogged(false);\n      }\n      if (error.message === 'Forbidden resource') {\n        navigate('/');\n      }\n      setFetchURL(undefined);\n    }\n  }, [error, navigate, setIsLogged]);\n  return {\n    doFetch,\n    data,\n    error,\n    loading\n  };\n};\n_s(useFetch, \"Ug4VH8MDUKraPnQZmjJN33FkGnE=\", false, function () {\n  return [useLocalStorage, useNavigate];\n});\nexport default useFetch;","map":{"version":3,"names":["useEffect","useRef","useState","useFetch","tsUseFetch","useLocalStorage","getHeaderOptions","useNavigate","_ref","_s","method","url","loading","setLoading","setIsLogged","process","env","REACT_APP_LOGGED_KEY","navigate","fetchURL","setFetchURL","postBody","body","data","error","current","JSON","stringify","options","doFetch","_ref2","message","undefined"],"sources":["/home/fernando/Documents/develop/www/cpvl/v4_cpvl_2025/cpvl-spa/src/hooks/useFetch.ts"],"sourcesContent":["import { useEffect, useRef, useState } from 'react';\nimport { useFetch as tsUseFetch, useLocalStorage } from 'usehooks-ts';\nimport { getHeaderOptions } from '../services';\nimport { useNavigate } from 'react-router-dom';\n\ninterface IProps {\n  method?: 'POST' | 'GET' | 'PUT' | 'DELETE';\n  url?: string;\n  body?: any;\n  options?: RequestInit;\n}\n\ninterface FetchOptions {\n  method: string;\n  url: string;\n}\n\nconst useFetch = <T>({ method, url} : FetchOptions) => {\n  const [loading, setLoading] = useState(false);\n  const [, setIsLogged] = useLocalStorage(\n    process.env.REACT_APP_LOGGED_KEY,\n    false\n  );\n  const navigate = useNavigate();\n  const [fetchURL, setFetchURL] = useState<string | undefined>(url);\n  const postBody = useRef(body);\n  const { data, error } = tsUseFetch<T>(fetchURL, {\n    method,\n    ...(postBody.current && { body: JSON.stringify(postBody.current) }),\n    ...getHeaderOptions(),\n    ...options\n  });\n\n  const doFetch = ({ url, body }: { url: string; body: any }) => {\n    if (body) {\n      postBody.current = body;\n    }\n    setFetchURL(url);\n  };\n\n  useEffect(() => {\n    if (error) {\n      if (error.message === 'Unauthorized') {\n        setIsLogged(false);\n      }\n      if (error.message === 'Forbidden resource') {\n        navigate('/');\n      }\n      setFetchURL(undefined);\n    }\n  }, [error, navigate, setIsLogged]);\n\n  return { doFetch, data, error, loading };\n};\n\nexport default useFetch;\n"],"mappings":";AAAA,SAASA,SAAS,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AACnD,SAASC,QAAQ,IAAIC,UAAU,EAAEC,eAAe,QAAQ,aAAa;AACrE,SAASC,gBAAgB,QAAQ,aAAa;AAC9C,SAASC,WAAW,QAAQ,kBAAkB;AAc9C,MAAMJ,QAAQ,GAAGK,IAAA,IAAsC;EAAAC,EAAA;EAAA,IAAlC;IAAEC,MAAM;IAAEC;EAAkB,CAAC,GAAAH,IAAA;EAChD,MAAM,CAACI,OAAO,EAAEC,UAAU,CAAC,GAAGX,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAM,GAAGY,WAAW,CAAC,GAAGT,eAAe,CACrCU,OAAO,CAACC,GAAG,CAACC,oBAAoB,EAChC,KACF,CAAC;EACD,MAAMC,QAAQ,GAAGX,WAAW,CAAC,CAAC;EAC9B,MAAM,CAACY,QAAQ,EAAEC,WAAW,CAAC,GAAGlB,QAAQ,CAAqBS,GAAG,CAAC;EACjE,MAAMU,QAAQ,GAAGpB,MAAM,CAACqB,IAAI,CAAC;EAC7B,MAAM;IAAEC,IAAI;IAAEC;EAAM,CAAC,GAAGpB,UAAU,CAAIe,QAAQ,EAAE;IAC9CT,MAAM;IACN,IAAIW,QAAQ,CAACI,OAAO,IAAI;MAAEH,IAAI,EAAEI,IAAI,CAACC,SAAS,CAACN,QAAQ,CAACI,OAAO;IAAE,CAAC,CAAC;IACnE,GAAGnB,gBAAgB,CAAC,CAAC;IACrB,GAAGsB;EACL,CAAC,CAAC;EAEF,MAAMC,OAAO,GAAGC,KAAA,IAA+C;IAAA,IAA9C;MAAEnB,GAAG;MAAEW;IAAiC,CAAC,GAAAQ,KAAA;IACxD,IAAIR,IAAI,EAAE;MACRD,QAAQ,CAACI,OAAO,GAAGH,IAAI;IACzB;IACAF,WAAW,CAACT,GAAG,CAAC;EAClB,CAAC;EAEDX,SAAS,CAAC,MAAM;IACd,IAAIwB,KAAK,EAAE;MACT,IAAIA,KAAK,CAACO,OAAO,KAAK,cAAc,EAAE;QACpCjB,WAAW,CAAC,KAAK,CAAC;MACpB;MACA,IAAIU,KAAK,CAACO,OAAO,KAAK,oBAAoB,EAAE;QAC1Cb,QAAQ,CAAC,GAAG,CAAC;MACf;MACAE,WAAW,CAACY,SAAS,CAAC;IACxB;EACF,CAAC,EAAE,CAACR,KAAK,EAAEN,QAAQ,EAAEJ,WAAW,CAAC,CAAC;EAElC,OAAO;IAAEe,OAAO;IAAEN,IAAI;IAAEC,KAAK;IAAEZ;EAAQ,CAAC;AAC1C,CAAC;AAACH,EAAA,CApCIN,QAAQ;EAAA,QAEYE,eAAe,EAItBE,WAAW;AAAA;AAgC9B,eAAeJ,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}