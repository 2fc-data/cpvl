{"ast":null,"code":"import{Box,FormControl,InputLabel,Select,MenuItem,Button,CircularProgress,Alert}from'@mui/material';import{useState,useEffect}from'react';import{useFetch}from'../../hooks';import{API,getURI}from'../../services';import{useParams}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export const StatusPilot=_ref=>{let{currentStatus,onStatusChange}=_ref;const{userId}=useParams();const[status,setStatus]=useState(currentStatus);const[errorMessage,setErrorMessage]=useState('');// Hook para fazer a requisição\nconst{doFetch,loading,error}=useFetch({method:'PATCH'});useEffect(()=>{if(error){setErrorMessage('Erro ao atualizar status');}},[error]);const handleUpdateStatus=async()=>{try{const response=await doFetch({url:getURI(\"\".concat(API.updateStatusPilot,\"?userId=\").concat(userId,\"&status=\").concat(status)),method:'PATCH'});if(response){alert('Status atualizado com sucesso!');}onStatusChange(status);}catch(error){setErrorMessage('Erro ao atualizar status');}};return/*#__PURE__*/_jsxs(Box,{display:\"flex\",alignItems:\"center\",gap:2,mt:1,children:[/*#__PURE__*/_jsxs(FormControl,{size:\"small\",children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Status\"}),/*#__PURE__*/_jsxs(Select,{value:status,label:\"Status\",onChange:e=>setStatus(e.target.value),sx:{borderRadius:3,minWidth:150},children:[/*#__PURE__*/_jsx(MenuItem,{value:\"filiado\",children:\"Filiado\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"desfiliado\",children:\"Desfiliado\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"expulso\",children:\"Expulso\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"pendente\",children:\"Pendente\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"suspenso\",children:\"Suspenso\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"trancado\",children:\"Trancado\"})]})]}),loading?/*#__PURE__*/_jsx(CircularProgress,{}):/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:handleUpdateStatus,size:\"small\",sx:{borderRadius:3},children:\"Atualizar\"}),errorMessage&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",children:errorMessage})]});};","map":{"version":3,"names":["Box","FormControl","InputLabel","Select","MenuItem","Button","CircularProgress","Alert","useState","useEffect","useFetch","API","getURI","useParams","jsx","_jsx","jsxs","_jsxs","StatusPilot","_ref","currentStatus","onStatusChange","userId","status","setStatus","errorMessage","setErrorMessage","doFetch","loading","error","method","handleUpdateStatus","response","url","concat","updateStatusPilot","alert","display","alignItems","gap","mt","children","size","value","label","onChange","e","target","sx","borderRadius","minWidth","variant","color","onClick","severity"],"sources":["/home/fernando/Documents/develop/www/cpvl/v4_cpvl_2025/cpvl-spa/src/components/StatusPilot/StatusPilots.component.tsx"],"sourcesContent":["import {\n  Box,\n  FormControl,\n  InputLabel,\n  Select,\n  MenuItem,\n  Button,\n  CircularProgress,\n  Alert\n} from '@mui/material';\nimport { useState, useEffect } from 'react';\nimport { useFetch } from '../../hooks';\nimport { API, getURI } from '../../services';\nimport { useParams } from 'react-router-dom';\n\ninterface StatusPilotProps {\n  userId: number;\n  currentStatus: string;\n  onStatusChange: (newStatus: string) => void;\n}\n\nexport const StatusPilot = ({\n  currentStatus,\n  onStatusChange\n}: StatusPilotProps) => {\n  const { userId } = useParams<{ userId: string }>();\n  const [status, setStatus] = useState(currentStatus);\n  const [errorMessage, setErrorMessage] = useState<string>('');\n\n  // Hook para fazer a requisição\n  const { doFetch, loading, error } = useFetch({\n    method: 'PATCH'\n  });\n\n  useEffect(() => {\n    if (error) {\n      setErrorMessage('Erro ao atualizar status');\n    }\n  }, [error]);\n\n  const handleUpdateStatus = async () => {\n    try {\n      const response = await doFetch({\n        url: getURI(\n          `${API.updateStatusPilot}?userId=${userId}&status=${status}`\n        ),\n        method: 'PATCH'\n      });\n\n      if (response) {\n        alert('Status atualizado com sucesso!');\n      }\n      onStatusChange(status);\n    } catch (error) {\n      setErrorMessage('Erro ao atualizar status');\n    }\n  };\n\n  return (\n    <Box display=\"flex\" alignItems=\"center\" gap={2} mt={1}>\n      <FormControl size=\"small\">\n        <InputLabel>Status</InputLabel>\n        <Select\n          value={status}\n          label=\"Status\"\n          onChange={(e) => setStatus(e.target.value)}\n          sx={{ borderRadius: 3, minWidth: 150 }}\n        >\n          <MenuItem value=\"filiado\">Filiado</MenuItem>\n          <MenuItem value=\"desfiliado\">Desfiliado</MenuItem>\n          <MenuItem value=\"expulso\">Expulso</MenuItem>\n          <MenuItem value=\"pendente\">Pendente</MenuItem>\n          <MenuItem value=\"suspenso\">Suspenso</MenuItem>\n          <MenuItem value=\"trancado\">Trancado</MenuItem>\n        </Select>\n      </FormControl>\n\n      {loading ? (\n        <CircularProgress />\n      ) : (\n        <Button\n          variant=\"contained\"\n          color=\"primary\"\n          onClick={handleUpdateStatus}\n          size=\"small\"\n          sx={{ borderRadius: 3 }}\n        >\n          Atualizar\n        </Button>\n      )}\n\n      {errorMessage && <Alert severity=\"error\">{errorMessage}</Alert>}\n    </Box>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}