{"ast":null,"code":"var _jsxFileName = \"/home/fernando/Documents/develop/www/cpvl/v4_cpvl_2025/cpvl-spa/src/pages/Loginn/Login.component.tsx\",\n  _s = $RefreshSig$();\nimport { Alert, Box, Button, TextField, Typography } from '@mui/material';\nimport { useCallback, useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useLocalStorage } from 'usehooks-ts';\nimport { API, getURI } from '../../services';\nimport { useFetch } from '../../hooks';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Login = () => {\n  _s();\n  const navigate = useNavigate();\n  const [isLogged, setIsLogged] = useLocalStorage(process.env.REACT_APP_LOGGED_KEY, false);\n  const [loginBody, setLoginBody] = useState({\n    username: '',\n    password: ''\n  });\n  const {\n    doFetch: doLogin,\n    data,\n    error\n  } = useFetch({\n    method: 'POST'\n  });\n  const [formError, setFormError] = useState();\n  const [isLoading, setIsLoading] = useState(false);\n  useEffect(() => {\n    if (isLogged) {\n      navigate('/');\n    }\n  }, [isLogged, navigate]);\n  const clearErrorMessage = useCallback(() => setFormError(undefined), []);\n  const handleChange = useCallback(_ref => {\n    let {\n      target\n    } = _ref;\n    const {\n      value,\n      name\n    } = target;\n    setLoginBody(prevState => ({\n      ...prevState,\n      [name]: value.trim()\n    }));\n    clearErrorMessage();\n  }, [clearErrorMessage]);\n  const handleLogin = useCallback(() => {\n    if (!loginBody.username || !loginBody.password) {\n      return setFormError('Preencha os campos corretamente');\n    }\n    setIsLoading(true);\n    doLogin({\n      url: getURI(API.login),\n      body: loginBody\n    });\n  }, [doLogin, loginBody]);\n  useEffect(() => {\n    if (error) {\n      setIsLoading(false);\n      setFormError(error.message === 'Unauthorized' ? 'Usuário ou senha incorretos' : error.message);\n    }\n    if (data && data.status === 'ok') {\n      setIsLogged(true);\n    }\n  }, [error, data, setIsLogged]);\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      padding: '20px',\n      display: 'flex',\n      flexDirection: 'column'\n    },\n    children: [/*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        margin: '20px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h3\",\n        mb: 2,\n        children: \"CPVL\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"body2\",\n        children: \"Bem-vindo ao portal de servi\\xE7os admistrativos do Clube Po\\xE7oscaldense de Voo Livre. Entre com o seu usu\\xE1rio e senha para continuar.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        margin: '10px',\n        padding: '10px'\n      },\n      children: /*#__PURE__*/_jsxDEV(TextField, {\n        variant: \"outlined\",\n        value: loginBody.username,\n        name: \"username\",\n        label: \"Usu\\xE1rio\",\n        onChange: handleChange,\n        onFocus: clearErrorMessage,\n        fullWidth: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        margin: '10px',\n        padding: '10px',\n        marginTop: 0,\n        paddingTop: 0\n      },\n      children: /*#__PURE__*/_jsxDEV(TextField, {\n        variant: \"outlined\",\n        value: loginBody.password,\n        name: \"password\",\n        type: \"password\",\n        label: \"Senha\",\n        onChange: handleChange,\n        onFocus: clearErrorMessage,\n        fullWidth: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      disabled: isLoading,\n      sx: {\n        marginLeft: '20px',\n        marginRight: '20px'\n      },\n      variant: \"contained\",\n      color: \"primary\",\n      onClick: handleLogin,\n      size: \"large\",\n      children: \"Entrar\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }, this), formError && /*#__PURE__*/_jsxDEV(Alert, {\n      sx: {\n        margin: '20px'\n      },\n      severity: \"error\",\n      children: formError\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 5\n  }, this);\n};\n_s(Login, \"UA7UR2CqiGLCEtA/LuLCGCKyoX0=\", false, function () {\n  return [useNavigate, useLocalStorage, useFetch];\n});\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["Alert","Box","Button","TextField","Typography","useCallback","useEffect","useState","useNavigate","useLocalStorage","API","getURI","useFetch","jsxDEV","_jsxDEV","Login","_s","navigate","isLogged","setIsLogged","process","env","REACT_APP_LOGGED_KEY","loginBody","setLoginBody","username","password","doFetch","doLogin","data","error","method","formError","setFormError","isLoading","setIsLoading","clearErrorMessage","undefined","handleChange","_ref","target","value","name","prevState","trim","handleLogin","url","login","body","message","status","sx","padding","display","flexDirection","children","margin","variant","mb","fileName","_jsxFileName","lineNumber","columnNumber","label","onChange","onFocus","fullWidth","marginTop","paddingTop","type","disabled","marginLeft","marginRight","color","onClick","size","severity","_c","$RefreshReg$"],"sources":["/home/fernando/Documents/develop/www/cpvl/v4_cpvl_2025/cpvl-spa/src/pages/Loginn/Login.component.tsx"],"sourcesContent":["import { Alert, Box, Button, TextField, Typography } from '@mui/material';\nimport { useCallback, useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useLocalStorage } from 'usehooks-ts';\nimport { API, getURI } from '../../services';\nimport { useFetch } from '../../hooks';\n\ninterface ILoginBody {\n  username: string;\n  password: string;\n}\n\ninterface IApiResponse {\n  status: string;\n}\n\nconst Login = () => {\n  const navigate = useNavigate();\n  const [isLogged, setIsLogged] = useLocalStorage(\n    process.env.REACT_APP_LOGGED_KEY,\n    false\n  );\n  const [loginBody, setLoginBody] = useState<ILoginBody>({\n    username: '',\n    password: ''\n  });\n  const {\n    doFetch: doLogin,\n    data,\n    error\n  } = useFetch<IApiResponse>({ method: 'POST' });\n  const [formError, setFormError] = useState<string | undefined>();\n  const [isLoading, setIsLoading] = useState(false);\n\n  useEffect(() => {\n    if (isLogged) {\n      navigate('/');\n    }\n  }, [isLogged, navigate]);\n\n  const clearErrorMessage = useCallback(() => setFormError(undefined), []);\n\n  const handleChange = useCallback(\n    ({ target }: React.ChangeEvent<HTMLInputElement>) => {\n      const { value, name } = target;\n      setLoginBody((prevState) => ({\n        ...prevState,\n        [name]: value.trim()\n      }));\n      clearErrorMessage();\n    },\n    [clearErrorMessage]\n  );\n\n  const handleLogin = useCallback(() => {\n    if (!loginBody.username || !loginBody.password) {\n      return setFormError('Preencha os campos corretamente');\n    }\n    setIsLoading(true);\n    doLogin({ url: getURI(API.login), body: loginBody });\n  }, [doLogin, loginBody]);\n\n  useEffect(() => {\n    if (error) {\n      setIsLoading(false);\n      setFormError(\n        error.message === 'Unauthorized'\n          ? 'Usuário ou senha incorretos'\n          : error.message\n      );\n    }\n    if (data && data.status === 'ok') {\n      setIsLogged(true);\n    }\n  }, [error, data, setIsLogged]);\n\n  return (\n    <Box sx={{ padding: '20px', display: 'flex', flexDirection: 'column' }}>\n      <Box sx={{ margin: '20px' }}>\n        <Typography variant=\"h3\" mb={2}>\n          CPVL\n        </Typography>\n        <Typography variant=\"body2\">\n          Bem-vindo ao portal de serviços admistrativos do Clube Poçoscaldense\n          de Voo Livre. Entre com o seu usuário e senha para continuar.\n        </Typography>\n      </Box>\n\n      <Box sx={{ margin: '10px', padding: '10px' }}>\n        <TextField\n          variant=\"outlined\"\n          value={loginBody.username}\n          name=\"username\"\n          label=\"Usuário\"\n          onChange={handleChange}\n          onFocus={clearErrorMessage}\n          fullWidth\n        />\n      </Box>\n      <Box\n        sx={{ margin: '10px', padding: '10px', marginTop: 0, paddingTop: 0 }}\n      >\n        <TextField\n          variant=\"outlined\"\n          value={loginBody.password}\n          name=\"password\"\n          type=\"password\"\n          label=\"Senha\"\n          onChange={handleChange}\n          onFocus={clearErrorMessage}\n          fullWidth\n        />\n      </Box>\n      <Button\n        disabled={isLoading}\n        sx={{ marginLeft: '20px', marginRight: '20px' }}\n        variant=\"contained\"\n        color=\"primary\"\n        onClick={handleLogin}\n        size=\"large\"\n      >\n        Entrar\n      </Button>\n      {formError && (\n        <Alert sx={{ margin: '20px' }} severity=\"error\">\n          {formError}\n        </Alert>\n      )}\n    </Box>\n  );\n};\n\nexport default Login;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}