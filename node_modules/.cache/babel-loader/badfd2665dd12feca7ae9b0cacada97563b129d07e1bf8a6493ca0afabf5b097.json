{"ast":null,"code":"var _jsxFileName = \"/home/fernando/Documents/develop/www/cpvl/v4_cpvl_2025/cpvl-spa/src/components/PaymentChechbox/PaymentCheckbox.component.tsx\",\n  _s = $RefreshSig$();\nimport { useState } from 'react';\nimport { useFetch } from '../../hooks/';\nimport { useParams } from 'react-router-dom';\nimport { API, getURI } from '../../services';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const PaymentCheckbox = () => {\n  _s();\n  const {\n    userId\n  } = useParams();\n  const {\n    doFetch,\n    loading\n  } = useFetch({\n    method: 'POST'\n  });\n  const [selectedMonths, setSelectedMonths] = useState([]);\n  const handleCheckboxChange = month => {\n    setSelectedMonths(prev => prev.includes(month) ? prev.filter(m => m !== month) : [...prev, month]);\n  };\n\n  // quando marcar o checkbox → insere na tabela\n  const handleSubmit = async () => {\n    if (!userId) return;\n    const qtd = selectedMonths.length;\n    let type = 'mensal';\n    if (qtd === 3) type = 'trimestral';\n    if (qtd === 6) type = 'semestral';\n    if (qtd === 12) type = 'anual';\n    try {\n      await doFetch({\n        url: getURI(API.paymentMonthly),\n        body: {\n          userId: parseInt(userId),\n          amount: 50 * qtd,\n          // exemplo: 50 por mês\n          ref_year: new Date().getFullYear(),\n          ref_month: qtd,\n          // salva a quantidade de meses\n          type,\n          description: `Pagamento ${type} via checkbox`,\n          date: new Date()\n        },\n        method: 'POST'\n      });\n      alert(`Pagamento ${type} registrado com sucesso!`);\n    } catch (error) {\n      console.error('Erro ao salvar pagamento', error);\n      alert('Erro ao salvar pagamento');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"label\", {\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"checkbox\",\n      checked: checked,\n      onChange: handleChange,\n      disabled: loading\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this), \"Pagamento\"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 5\n  }, this);\n};\n_s(PaymentCheckbox, \"8febjPiYnB/CY8C9D2Q8oSLhgJE=\", false, function () {\n  return [useParams, useFetch];\n});\n_c = PaymentCheckbox;\nvar _c;\n$RefreshReg$(_c, \"PaymentCheckbox\");","map":{"version":3,"names":["useState","useFetch","useParams","API","getURI","jsxDEV","_jsxDEV","PaymentCheckbox","_s","userId","doFetch","loading","method","selectedMonths","setSelectedMonths","handleCheckboxChange","month","prev","includes","filter","m","handleSubmit","qtd","length","type","url","paymentMonthly","body","parseInt","amount","ref_year","Date","getFullYear","ref_month","description","date","alert","error","console","children","checked","onChange","handleChange","disabled","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/home/fernando/Documents/develop/www/cpvl/v4_cpvl_2025/cpvl-spa/src/components/PaymentChechbox/PaymentCheckbox.component.tsx"],"sourcesContent":["import { useState } from 'react';\nimport { useFetch } from '../../hooks/';\nimport { useParams } from 'react-router-dom';\nimport { API, getURI } from '../../services';\nimport { Button, Box } from '@mui/material';\n\ninterface PaymentMonthly {\n  id: number;\n  userId: number;\n  amount: number;\n  ref_year: number;\n  ref_month: number;\n  type?: string;\n  description?: string;\n  date?: string;\n}\n\nexport const PaymentCheckbox: React.FC = () => {\n  const { userId } = useParams<{ userId: string }>();\n  const { doFetch, loading } = useFetch<PaymentMonthly>({\n    method: 'POST'\n  });\n  const [selectedMonths, setSelectedMonths] = useState<number[]>([]);\n\n  const handleCheckboxChange = (month: number) => {\n    setSelectedMonths((prev) =>\n      prev.includes(month)\n        ? prev.filter((m) => m !== month)\n        : [...prev, month]\n    );\n  };\n\n  // quando marcar o checkbox → insere na tabela\n  const handleSubmit = async () => {\n    if (!userId) return;\n\n    const qtd = selectedMonths.length;\n    let type = 'mensal';\n\n    if (qtd === 3) type = 'trimestral';\n    if (qtd === 6) type = 'semestral';\n    if (qtd === 12) type = 'anual';\n\n    try {\n      await doFetch({\n        url: getURI(API.paymentMonthly),\n        body: {\n          userId: parseInt(userId),\n          amount: 50 * qtd, // exemplo: 50 por mês\n          ref_year: new Date().getFullYear(),\n          ref_month: qtd, // salva a quantidade de meses\n          type,\n          description: `Pagamento ${type} via checkbox`,\n          date: new Date(),\n        },\n        method: 'POST',\n      });\n\n      alert(`Pagamento ${type} registrado com sucesso!`);\n    } catch (error) {\n      console.error('Erro ao salvar pagamento', error);\n      alert('Erro ao salvar pagamento');\n    }\n  };\n\n\n  return (\n    <label>\n      <input\n        type=\"checkbox\"\n        checked={checked}\n        onChange={handleChange}\n        disabled={loading}\n      />\n      Pagamento\n    </label>\n  );\n};\n"],"mappings":";;AAAA,SAASA,QAAQ,QAAQ,OAAO;AAChC,SAASC,QAAQ,QAAQ,cAAc;AACvC,SAASC,SAAS,QAAQ,kBAAkB;AAC5C,SAASC,GAAG,EAAEC,MAAM,QAAQ,gBAAgB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAc7C,OAAO,MAAMC,eAAyB,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC7C,MAAM;IAAEC;EAAO,CAAC,GAAGP,SAAS,CAAqB,CAAC;EAClD,MAAM;IAAEQ,OAAO;IAAEC;EAAQ,CAAC,GAAGV,QAAQ,CAAiB;IACpDW,MAAM,EAAE;EACV,CAAC,CAAC;EACF,MAAM,CAACC,cAAc,EAAEC,iBAAiB,CAAC,GAAGd,QAAQ,CAAW,EAAE,CAAC;EAElE,MAAMe,oBAAoB,GAAIC,KAAa,IAAK;IAC9CF,iBAAiB,CAAEG,IAAI,IACrBA,IAAI,CAACC,QAAQ,CAACF,KAAK,CAAC,GAChBC,IAAI,CAACE,MAAM,CAAEC,CAAC,IAAKA,CAAC,KAAKJ,KAAK,CAAC,GAC/B,CAAC,GAAGC,IAAI,EAAED,KAAK,CACrB,CAAC;EACH,CAAC;;EAED;EACA,MAAMK,YAAY,GAAG,MAAAA,CAAA,KAAY;IAC/B,IAAI,CAACZ,MAAM,EAAE;IAEb,MAAMa,GAAG,GAAGT,cAAc,CAACU,MAAM;IACjC,IAAIC,IAAI,GAAG,QAAQ;IAEnB,IAAIF,GAAG,KAAK,CAAC,EAAEE,IAAI,GAAG,YAAY;IAClC,IAAIF,GAAG,KAAK,CAAC,EAAEE,IAAI,GAAG,WAAW;IACjC,IAAIF,GAAG,KAAK,EAAE,EAAEE,IAAI,GAAG,OAAO;IAE9B,IAAI;MACF,MAAMd,OAAO,CAAC;QACZe,GAAG,EAAErB,MAAM,CAACD,GAAG,CAACuB,cAAc,CAAC;QAC/BC,IAAI,EAAE;UACJlB,MAAM,EAAEmB,QAAQ,CAACnB,MAAM,CAAC;UACxBoB,MAAM,EAAE,EAAE,GAAGP,GAAG;UAAE;UAClBQ,QAAQ,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC;UAClCC,SAAS,EAAEX,GAAG;UAAE;UAChBE,IAAI;UACJU,WAAW,EAAE,aAAaV,IAAI,eAAe;UAC7CW,IAAI,EAAE,IAAIJ,IAAI,CAAC;QACjB,CAAC;QACDnB,MAAM,EAAE;MACV,CAAC,CAAC;MAEFwB,KAAK,CAAC,aAAaZ,IAAI,0BAA0B,CAAC;IACpD,CAAC,CAAC,OAAOa,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;MAChDD,KAAK,CAAC,0BAA0B,CAAC;IACnC;EACF,CAAC;EAGD,oBACE9B,OAAA;IAAAiC,QAAA,gBACEjC,OAAA;MACEkB,IAAI,EAAC,UAAU;MACfgB,OAAO,EAAEA,OAAQ;MACjBC,QAAQ,EAAEC,YAAa;MACvBC,QAAQ,EAAEhC;IAAQ;MAAAiC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACnB,CAAC,aAEJ;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAO,CAAC;AAEZ,CAAC;AAACvC,EAAA,CA5DWD,eAAyB;EAAA,QACjBL,SAAS,EACCD,QAAQ;AAAA;AAAA+C,EAAA,GAF1BzC,eAAyB;AAAA,IAAAyC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}