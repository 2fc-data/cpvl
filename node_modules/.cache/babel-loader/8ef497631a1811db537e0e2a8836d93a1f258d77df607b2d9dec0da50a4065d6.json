{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.QrCodePix = void 0;\nconst qrcode_1 = __importDefault(require(\"qrcode\"));\nconst crc_1 = require(\"crc\");\nconst yup_1 = require(\"yup\");\nfunction QrCodePix(_ref) {\n  let {\n    version,\n    key,\n    city,\n    name,\n    value,\n    message,\n    cep,\n    transactionId = '***',\n    currency = 986,\n    countryCode = 'BR'\n  } = _ref;\n  yup_1.string().equals(['01'], 'Version not supported').validateSync(version);\n  yup_1.string().min(2, 'countryCode: 2 characters').max(2, 'countryCode: 2 characters').nullable().validateSync(countryCode);\n  yup_1.string().min(8, 'cep: 8 characters').max(8, 'cep: 8 characters').nullable().validateSync(cep);\n  if (String(value) === '0') {\n    value = undefined;\n  }\n  yup_1.number().nullable().positive('Value must be a positive number').validateSync(value);\n  yup_1.string().max(25, 'transactionId: max 25 characters').nullable().validateSync(transactionId);\n  const payloadKeyString = generateKey(key, message);\n  const payload = [genEMV('00', version), genEMV('26', payloadKeyString), genEMV('52', '0000'), genEMV('53', String(currency))];\n  if (value) {\n    payload.push(genEMV('54', value.toFixed(2)));\n  }\n  name = String(name).substring(0, 25).toUpperCase().normalize('NFD').replace(/[\\u0300-\\u036f]/g, '');\n  city = String(city).substring(0, 15).toUpperCase().normalize('NFD').replace(/[\\u0300-\\u036f]/g, '');\n  payload.push(genEMV('58', countryCode.toUpperCase()));\n  payload.push(genEMV('59', name));\n  payload.push(genEMV('60', city));\n  if (cep) {\n    payload.push(genEMV('61', cep));\n  }\n  payload.push(genEMV('62', genEMV('05', transactionId)));\n  payload.push('6304');\n  const stringPayload = payload.join('');\n  const crcResult = crc_1.crc16ccitt(stringPayload).toString(16).toUpperCase().padStart(4, '0');\n  const payloadPIX = `${stringPayload}${crcResult}`;\n  return {\n    payload: () => payloadPIX,\n    base64: options => qrcode_1.default.toDataURL(payloadPIX, options)\n  };\n}\nexports.QrCodePix = QrCodePix;\nfunction generateKey(key, message) {\n  const payload = [genEMV('00', 'BR.GOV.BCB.PIX'), genEMV('01', key)];\n  if (message) {\n    payload.push(genEMV('02', message));\n  }\n  return payload.join('');\n}\nfunction genEMV(id, parameter) {\n  const len = parameter.length.toString().padStart(2, '0');\n  return `${id}${len}${parameter}`;\n}","map":{"version":3,"names":["__importDefault","mod","__esModule","Object","defineProperty","exports","value","QrCodePix","qrcode_1","require","crc_1","yup_1","_ref","version","key","city","name","message","cep","transactionId","currency","countryCode","string","equals","validateSync","min","max","nullable","String","undefined","number","positive","payloadKeyString","generateKey","payload","genEMV","push","toFixed","substring","toUpperCase","normalize","replace","stringPayload","join","crcResult","crc16ccitt","toString","padStart","payloadPIX","base64","options","default","toDataURL","id","parameter","len","length"],"sources":["/home/fernando/Documents/develop/www/cpvl/v4_cpvl_2025/cpvl-spa/node_modules/qrcode-pix/lib/index.js"],"sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.QrCodePix = void 0;\nconst qrcode_1 = __importDefault(require(\"qrcode\"));\nconst crc_1 = require(\"crc\");\nconst yup_1 = require(\"yup\");\nfunction QrCodePix({ version, key, city, name, value, message, cep, transactionId = '***', currency = 986, countryCode = 'BR', }) {\n    yup_1.string().equals(['01'], 'Version not supported').validateSync(version);\n    yup_1.string()\n        .min(2, 'countryCode: 2 characters')\n        .max(2, 'countryCode: 2 characters')\n        .nullable()\n        .validateSync(countryCode);\n    yup_1.string().min(8, 'cep: 8 characters').max(8, 'cep: 8 characters').nullable().validateSync(cep);\n    if (String(value) === '0') {\n        value = undefined;\n    }\n    yup_1.number().nullable().positive('Value must be a positive number').validateSync(value);\n    yup_1.string().max(25, 'transactionId: max 25 characters').nullable().validateSync(transactionId);\n    const payloadKeyString = generateKey(key, message);\n    const payload = [\n        genEMV('00', version),\n        genEMV('26', payloadKeyString),\n        genEMV('52', '0000'),\n        genEMV('53', String(currency)),\n    ];\n    if (value) {\n        payload.push(genEMV('54', value.toFixed(2)));\n    }\n    name = String(name)\n        .substring(0, 25)\n        .toUpperCase()\n        .normalize('NFD')\n        .replace(/[\\u0300-\\u036f]/g, '');\n    city = String(city)\n        .substring(0, 15)\n        .toUpperCase()\n        .normalize('NFD')\n        .replace(/[\\u0300-\\u036f]/g, '');\n    payload.push(genEMV('58', countryCode.toUpperCase()));\n    payload.push(genEMV('59', name));\n    payload.push(genEMV('60', city));\n    if (cep) {\n        payload.push(genEMV('61', cep));\n    }\n    payload.push(genEMV('62', genEMV('05', transactionId)));\n    payload.push('6304');\n    const stringPayload = payload.join('');\n    const crcResult = crc_1.crc16ccitt(stringPayload).toString(16).toUpperCase().padStart(4, '0');\n    const payloadPIX = `${stringPayload}${crcResult}`;\n    return {\n        payload: () => payloadPIX,\n        base64: (options) => qrcode_1.default.toDataURL(payloadPIX, options),\n    };\n}\nexports.QrCodePix = QrCodePix;\nfunction generateKey(key, message) {\n    const payload = [genEMV('00', 'BR.GOV.BCB.PIX'), genEMV('01', key)];\n    if (message) {\n        payload.push(genEMV('02', message));\n    }\n    return payload.join('');\n}\nfunction genEMV(id, parameter) {\n    const len = parameter.length.toString().padStart(2, '0');\n    return `${id}${len}${parameter}`;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}